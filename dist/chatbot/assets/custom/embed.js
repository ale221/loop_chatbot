!function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=57)}([function(e,t){var n=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports=!n(5)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"b",function(){return r}),n.d(t,"f",function(){return s}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return a}),n.d(t,"e",function(){return c}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return f});var o={CREATED:"created",DESTROYED:"destroyed",CLOSED:"closed",MESSAGE_RECEIVED:"messageReceived",MESSAGE_SENT:"messageSent",CUSTOM_RECEIVED:"customReceived",CONFIG_UPDATED:"configUpdated",STATE_CHANGED:"stateChanged",FIRST_TIME_USER:"newUser"},r=Object.values(o),s={FULLSCREEN:"fullscreen",SIDEBAR:"sidebar",POPUP:"popup"},i=Object.values(s),a=["mode","popupWidth","popupHeight","headerText","customPromptMessage","newChat","color","botIcon","allowBackgroundScroll","metadata","externalUserId","collectUserIpAddress","disableAttachments","disableInput","historyLimit","disableReset","themeCssUrl","customCssUrl","themeName","themeCssOnly","standalone","botId"],c={CONFIG:"fxo-messenger-config",REQUEST_CONFIG:"fxo-messenger-config-request",CLOSE:"fxo-messenger-close",DESTROY:"fxo-messenger-destroy",SEND_MESSAGE:"fxo-messenger-send-message",STATE_UPDATE:"fxo-messenger-state-change",MESSAGE_RECEIVED:"fxo-messenger-message-received",MESSAGE_SENT:"fxo-messenger-message-sent",CUSTOM_RECEIVED:"fxo-messenger-custom-received",CONFIG_UPDATED:"fxo-messenger-config-updated",VIEW_MODE_CHANGED:"fxo-messenger-view-mode-updated",FIRST_TIME_USER:"fxo-messenger-new-user",CLEAR_HISTORY:"fxo-messenger-clear-history",FORGET_USER:"fxo-forget-user"},u="https://flowxo-messenger-themes.s3-eu-west-1.amazonaws.com",f="classic"},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=function(){function e(){o(this,e),this._handlers={}}return r(e,[{key:"on",value:function(e,t){this._handlers[e]=this._handlers[e]||[],this._handlers[e].push(t)}},{key:"emit",value:function(e,t){var n=this._handlers[e];n&&n.forEach(function(e){return e(t)})}},{key:"off",value:function(e,t){var n=this._handlers[e];if(n)for(var o=void 0;(o=n.indexOf(t))>-1;)n.splice(o,1)}},{key:"removeListeners",value:function(e){e?this._handlers[e]={}:this._handlers={}}}]),e}();t.a=s},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var o=n(12),r=n(8);e.exports=function(e){return o(r(e))}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){var o=n(3),r=n(0),s=n(11),i=n(43),a=n(31),c=function(e,t,n){var u,f,l,d,_=e&c.F,h=e&c.G,m=e&c.S,g=e&c.P,p=e&c.B,b=h?o:m?o[t]||(o[t]={}):(o[t]||{}).prototype,v=h?r:r[t]||(r[t]={}),y=v.prototype||(v.prototype={});h&&(n=t);for(u in n)f=!_&&b&&void 0!==b[u],l=(f?b:n)[u],d=p&&f?a(l,o):g&&"function"==typeof l?a(Function.call,l):l,b&&i(b,u,l,e&c.U),v[u]!=l&&s(v,u,d),g&&y[u]!=l&&(y[u]=l)};o.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var o=n(38),r=n(42);e.exports=n(1)?function(e,t,n){return o.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var o=n(30);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==o(e)?e.split(""):Object(e)}},function(e,t,n){var o=n(40),r=n(33);e.exports=Object.keys||function(e){return o(e,r)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var o=n(0),r=n(3),s=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:o.version,mode:n(36)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){var n=Math.ceil,o=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?o:n)(e)}},function(e,t){var n=0,o=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+o).toString(36))}},function(e,t,n){"use strict";n(25),n(26),n(20)},function(e,t,n){"use strict";function o(e){var t={},n=e.indexOf("?");return n>-1&&(t=e.slice(n+1).split("&").reduce(function(e,t){var n=t.split("=");return 2===n.length&&(e[n[0]]=n[1]),e},{})),t}t.a=o},function(e,t,n){var o,r;"function"==typeof Symbol&&Symbol.iterator;/*! srcdoc-polyfill - v1.0.0 - 2017-01-29
 * http://github.com/jugglinmike/srcdoc-polyfill/
 * Copyright (c) 2017 Mike Pennisi; Licensed MIT */
!function(n,s){var i=window.srcDoc;o=[t],void 0!==(r=function(e){s(e,i),n.srcDoc=e}.apply(t,o))&&(e.exports=r)}(this,function(e,t){var n,o,r,s=!!("srcdoc"in document.createElement("iframe")),i="Polyfill may not function in the presence of the `sandbox` attribute. Consider using the `force` option.",a=/\ballow-same-origin\b/,c=function(e,t){var n=e.getAttribute("sandbox");"string"!=typeof n||a.test(n)||(t&&t.force?e.removeAttribute("sandbox"):t&&!1===t.force||(r(i),e.setAttribute("data-srcdoc-polyfill",i)))},u={compliant:function(e,t,n){t&&(c(e,n),e.setAttribute("srcdoc",t))},legacy:function(e,t,n){var o;e&&e.getAttribute&&(t?e.setAttribute("srcdoc",t):t=e.getAttribute("srcdoc"),t&&(c(e,n),o="javascript: window.frameElement.getAttribute('srcdoc');",e.contentWindow&&(e.contentWindow.location=o),e.setAttribute("src",o)))}},f=e;if(r=window.console&&window.console.error?function(e){window.console.error("[srcdoc-polyfill] "+e)}:function(){},f.set=u.compliant,f.noConflict=function(){return window.srcDoc=t,f},!s)for(f.set=u.legacy,o=document.getElementsByTagName("iframe"),n=o.length;n--;)f.set(o[n])})},function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){return f.a.reduce(function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t},{})}function c(e,t){return void 0===e||(t?t(e):e.length>0)}var u=n(4),f=n(2),l=n(24),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),_=new l.a,h=function(e){function t(){r(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));e.EVENT_NAMES.forEach(function(t){_.on(t,function(n){e.emit(t,n)})});var n=e;return e.on("created",function(){n.setConfig({metadata:{hostUrl:window.location.href}})}),e}return i(t,e),d(t,[{key:"sendMessage",value:function(e,t){if(!e)throw new Error("The message cannot be blank.");return _.sendMessage(e,t||{})}},{key:"setConfig",value:function(e){var t=this;e=a(e);var n=c(e.mode,function(e){return t.MODES.indexOf(e)>-1}),o=c(e.headerText),r=c(e.customPromptMessage),s=c(e.color),i=c(e.botIcon),u=c(e.standalone,function(e){return!0===e}),f=c(e.allowBackgroundScroll,function(e){return!0===e}),l=c(e.botId),d=c(e.metadata,function(e){return e});return!!(n&&o&&s&&i&&u&&l&&f&&d&&r)&&(_.setConfig(e),!0)}},{key:"getState",value:function(){return _.getInstanceState()}},{key:"create",value:function(){_.createInstance()}},{key:"destroy",value:function(){return _.destroyCurrent()}},{key:"clear",value:function(){return _.clearCurrent()}},{key:"forget",value:function(){return _.forget()}},{key:"toggle",value:function(){return _.toggleCurrentState()}}]),t}(u.a);t.a=h;var m=[].concat(o(f.b));h.prototype.MODES=[].concat(o(f.c)),h.prototype.EVENT_NAMES=m,m.forEach(function(e){h.prototype["on"+(e[0].toUpperCase()+e.slice(1))]=function(t){t&&this.on(e,t)},h.prototype["off"+(e[0].toUpperCase()+e.slice(1))]=function(t){t&&this.off(e,t)}})},function(e,t,n){"use strict";function o(e,t,n){e=e?decodeURIComponent(e):r.g+"/"+(n||r.h)+".css",t&&(t=decodeURIComponent(t)),console.log("THEME CSS",e,"CUSTOM CSS",t);var o='\n  <link\n  rel="stylesheet"\n  href="'+e+'"/>',s="";return t&&(s='\n   <link \n   rel="stylesheet"\n   href="'+t+'"/>'),'\n  <!DOCTYPE html>\n  <html lang="en">\n    <head>\n      <meta charset="UTF-8" />\n      <meta\n        name="viewport"\n        content="initial-scale=1.0, user-scalable=no, maximum-scale=1.0, width=device-width"\n      />\n      <meta http-equiv="X-UA-Compatible" content="ie=edge" />\n      <title>Flow XO Web Messenger</title>\n      '+o+"\n      "+s+'\n    </head>\n    <body>\n      <div id="app" class="web-messenger">\n        <div class="web-messenger-header">\n          <div class="web-messenger-title">\n            <div class="web-messenger-title-skeleton"></div>\n          </div>\n        </div>\n        <div class="web-messenger-messages">\n          <div class="web-messenger-message">\n            <div class="web-messenger-message-icon-placeholder"></div>\n            <div class="web-messenger-message-bubble">\n              <div class="web-messenger-typing">\n                <div class="bounce1"></div>\n                <div class="bounce2"></div>\n                <div class="bounce3"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <script src="https://widget.flowxo.com/messenger.dll.js"><\/script>\n      <script src="https://widget.flowxo.com/messenger.js"><\/script>\n    </body>\n  </html>\n  '}t.a=o;var r=n(2)},function(module,__webpack_exports__,__webpack_require__){"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var __WEBPACK_IMPORTED_MODULE_0_common_event_emitter__=__webpack_require__(4),__WEBPACK_IMPORTED_MODULE_1__Constants__=__webpack_require__(2),__WEBPACK_IMPORTED_MODULE_2__index__=__webpack_require__(22),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),FullscreenThreshold=500,FxoMessenger=function(_EventEmitter){function FxoMessenger(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,FxoMessenger);var t=_possibleConstructorReturn(this,(FxoMessenger.__proto__||Object.getPrototypeOf(FxoMessenger)).call(this));return t.config=e,t.state="loading",t._eventHandler=t._processPostMessageCommands.bind(t),t.config.popupHeight&&""!==t.config.popupHeight.trim()&&(t.config.mode="popup"),t._addMessenger(),t._addPostMessageListener(),t}return _inherits(FxoMessenger,_EventEmitter),_createClass(FxoMessenger,[{key:"destroy",value:function(){this.removeListeners(),this._removePostMessageListener(),this._removeMessenger()}},{key:"setConfig",value:function(e){this.config=e,this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.CONFIG,{config:e}),this._updateViewMode()}},{key:"getState",value:function(){var e=this.config,t=e.color,n=e.fullscreen,o=e.headerText,r=e.botIcon,s=e.disableAttachments,i=e.collectUserIpAddress,a=e.testConsole;return{state:this.state,color:t,fullscreen:n,headerText:o,botIcon:r,testConsole:a,disableAttachments:s,collectUserIpAddress:i}}},{key:"sendMessage",value:function(e,t){this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.SEND_MESSAGE,{text:e,metadata:t})}},{key:"_sendPostMessageCommand",value:function(e,t){var n=Object.assign({type:e},t);this._iframe.contentWindow.postMessage(n,"*")}},{key:"_processPostMessageCommands",value:function _processPostMessageCommands(payload){var message=payload.data;switch(message.type){case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.REQUEST_CONFIG:this.setConfig(this.config);break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.CLOSE:this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.CLOSED),this.destroy();break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.STATE_UPDATE:this.state=message.state,this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.STATE_CHANGED,this.state);break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.MESSAGE_RECEIVED:this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.MESSAGE_RECEIVED,message.message);break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.MESSAGE_SENT:this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.MESSAGE_SENT,message.message);break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.CUSTOM_RECEIVED:if(this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.CUSTOM_RECEIVED,message.custom),message.custom&&message.custom.body&&message.custom.body.eval&&message.custom.body.eval.length>0)try{eval(message.custom.body.eval)}catch(e){console.log("Could not eval custom javascript ("+message.custom.body.eval+") because of an error:"+e)}break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.CONFIG_UPDATED:this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.CONFIG_UPDATED);break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.e.FIRST_TIME_USER:this.emit(__WEBPACK_IMPORTED_MODULE_1__Constants__.d.FIRST_TIME_USER)}}},{key:"_addMessenger",value:function(){this._addStylesheet(),this._calcIsFullscreen();var e=this._getWidthAndHeightForMode(),t=e.width,n=e.height,o=this._getWidthAndHeightForContainer(),r=document.createElement("div"),s=document.createElement("iframe");this._element=s,Object.assign(r,{id:" fxo-messenger-iframe-container",className:"fxo-messenger-iframe-container"}),Object.assign(s,{id:"fxo-messenger-iframe",className:"fxo-messenger-iframe",scrolling:"no",width:t,height:n,srcdoc:__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__index__.a)(this.config.themeCssUrl,this.config.customCssUrl,this.config.themeName),allowFullscreen:!0}),Object.assign(s.style,{border:"none",position:"fixed",bottom:0,right:0,"background-color":"rgb(249, 249, 251)","z-index":9999}),this.config.fullscreen||(Object.assign(r.style,{width:o.width,height:o.height,position:"fixed",right:"0px",bottom:"0px","z-index":"9999","box-shadow":"0 1px 6px rgba(17, 54, 84, .04), 0 2px 32px rgba(17, 54, 84, .08)"}),Object.assign(s.style,{"margin-left":"20px"})),r.appendChild(this._iframe);try{this.config.fullscreen&&document.body.classList.add("fxo-messenger-fullscreen"),this.config.allowBackgroundScroll||document.body.classList.add("fxo-messenger-noscroll")}catch(e){console.error("Error adding class to parent body element.",e)}this._containerElement=r,document.body.appendChild(this._container)}},{key:"_getWidthAndHeightForMode",value:function(){var e=void 0,t="100%";switch(this.config.mode){case __WEBPACK_IMPORTED_MODULE_1__Constants__.f.FULLSCREEN:e="100%";break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.f.POPUP:e=this.config.popupWidth||400,t=this.config.popupHeight||400;break;default:e=this.config.fullscreen?"100%":this.config.popupWidth||400}return{width:e,height:t}}},{key:"_getWidthAndHeightForContainer",value:function(){var e=void 0,t="100%";switch(this.config.mode){case __WEBPACK_IMPORTED_MODULE_1__Constants__.f.FULLSCREEN:e="100%";break;case __WEBPACK_IMPORTED_MODULE_1__Constants__.f.POPUP:e=this.config.popupWidth||"400px",t=this.config.popupHeight||"400px";break;default:e=this.config.fullscreen?"100%":this.config.popupWidth||"400px"}return{width:e,height:t}}},{key:"_updateViewMode",value:function(){Object.assign(this._element,this._getWidthAndHeightForMode()),this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.VIEW_MODE_CHANGED)}},{key:"_clearHistory",value:function(){this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.CLEAR_HISTORY)}},{key:"_forget",value:function(){this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.FORGET_USER)}},{key:"_removeMessenger",value:function(){this._sendPostMessageCommand(__WEBPACK_IMPORTED_MODULE_1__Constants__.e.DESTROY),document.body.removeChild(this._container),this._removeStylesheet()}},{key:"_addPostMessageListener",value:function(){window.addEventListener("message",this._eventHandler)}},{key:"_removePostMessageListener",value:function(){window.removeEventListener("message",this._eventHandler)}},{key:"_addStylesheet",value:function(){var e=document.createElement("style");this._stylesheet=e,Object.assign(e,{id:"fxo-messenger-styles",type:"text/css"}),document.body.classList.add("fxo-messenger-open"),e.appendChild(document.createTextNode(".fxo-messenger-fullscreen {overflow:hidden;height:100%;width:100%;position:fixed} .fxo-messenger-noscroll {overflow:hidden!important}")),document.head.appendChild(e)}},{key:"_removeStylesheet",value:function(){try{document.body.classList.remove("fxo-messenger-fullscreen"),document.body.classList.remove("fxo-messenger-noscroll"),document.body.classList.remove("fxo-messenger-open")}catch(e){console.error("Error removing class from parent body element.",e)}document.head.removeChild(this._stylesheet)}},{key:"_calcIsFullscreen",value:function(){this.config.fullscreen=window.innerWidth<FullscreenThreshold}},{key:"state",get:function(){return this._state},set:function(e){this._state=e}},{key:"_container",get:function(){return this._containerElement}},{key:"_iframe",get:function(){return this._element}}]),FxoMessenger}(__WEBPACK_IMPORTED_MODULE_0_common_event_emitter__.a);__webpack_exports__.a=FxoMessenger},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(4),a=n(2),c=n(23),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),f=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"createInstance",value:function(){var e=this;this._removeExistingMessenger()&&console.warn("FxoMessenger:","Found another instance of FxoMessenger. Removing old instance. Installing new one.");var t=new c.a(this.config);return this._messengerInstance=t,t.on(a.d.CLOSED,function(){e._messengerInstance=void 0,e.emit(a.d.DESTROYED)}),a.b.forEach(function(n){t.on(n,function(t){e.emit(n,t)})}),this.emit(a.d.CREATED),!0}},{key:"destroyCurrent",value:function(){return!!this._removeExistingMessenger()}},{key:"clearCurrent",value:function(){var e=this._messengerInstance;e&&e._clearHistory()}},{key:"forget",value:function(){var e=this._messengerInstance;e&&e._forget()}},{key:"toggleCurrentState",value:function(){return!this._removeExistingMessenger()&&this.createInstance()}},{key:"setConfig",value:function(e){var t=this.config||{},n=this.config&&this.config.metadata||{},o=Object.assign(t,e),r=Object.assign(n,e.metadata);o.metadata=r,this.config=o;var s=this._messengerInstance;s&&s.setConfig(this.config)}},{key:"getInstanceState",value:function(){var e=this._messengerInstance;return e&&e.getState()||{state:"detached"}}},{key:"sendMessage",value:function(e,t){var n=this._messengerInstance;return!!n&&n.sendMessage(e,t||{})}},{key:"_removeExistingMessenger",value:function(){var e=this._messengerInstance;return e&&(e.destroy(),this._messengerInstance=void 0,this.emit(a.d.DESTROYED)),!!e}},{key:"_messengerInstance",get:function(){return this._currentFxoMessenger},set:function(e){this._currentFxoMessenger=e}}]),t}(i.a);t.a=f},function(e,t,n){n(49),e.exports=n(0).Object.assign},function(e,t,n){n(50),e.exports=n(0).Object.values},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var o=n(6);e.exports=function(e){if(!o(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){var o=n(7),r=n(46),s=n(45);e.exports=function(e){return function(t,n,i){var a,c=o(t),u=r(c.length),f=s(i,u);if(e&&n!=n){for(;u>f;)if((a=c[f++])!=a)return!0}else for(;u>f;f++)if((e||f in c)&&c[f]===n)return e||f||0;return!e&&-1}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var o=n(27);e.exports=function(e,t,n){if(o(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,r){return e.call(t,n,o,r)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){var o=n(6),r=n(3).document,s=o(r)&&o(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){e.exports=n(15)("native-function-to-string",Function.toString)},function(e,t,n){e.exports=!n(1)&&!n(5)(function(){return 7!=Object.defineProperty(n(32)("div"),"a",{get:function(){return 7}}).a})},function(e,t){e.exports=!1},function(e,t,n){"use strict";var o=n(1),r=n(13),s=n(39),i=n(14),a=n(47),c=n(12),u=Object.assign;e.exports=!u||n(5)(function(){var e={},t={},n=Symbol(),o="abcdefghijklmnopqrst";return e[n]=7,o.split("").forEach(function(e){t[e]=e}),7!=u({},e)[n]||Object.keys(u({},t)).join("")!=o})?function(e,t){for(var n=a(e),u=arguments.length,f=1,l=s.f,d=i.f;u>f;)for(var _,h=c(arguments[f++]),m=l?r(h).concat(l(h)):r(h),g=m.length,p=0;g>p;)_=m[p++],o&&!d.call(h,_)||(n[_]=h[_]);return n}:u},function(e,t,n){var o=n(28),r=n(35),s=n(48),i=Object.defineProperty;t.f=n(1)?Object.defineProperty:function(e,t,n){if(o(e),t=s(t,!0),o(n),r)try{return i(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var o=n(10),r=n(7),s=n(29)(!1),i=n(44)("IE_PROTO");e.exports=function(e,t){var n,a=r(e),c=0,u=[];for(n in a)n!=i&&o(a,n)&&u.push(n);for(;t.length>c;)o(a,n=t[c++])&&(~s(u,n)||u.push(n));return u}},function(e,t,n){var o=n(1),r=n(13),s=n(7),i=n(14).f;e.exports=function(e){return function(t){for(var n,a=s(t),c=r(a),u=c.length,f=0,l=[];u>f;)n=c[f++],o&&!i.call(a,n)||l.push(e?[n,a[n]]:a[n]);return l}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var o=n(3),r=n(11),s=n(10),i=n(17)("src"),a=n(34),c=(""+a).split("toString");n(0).inspectSource=function(e){return a.call(e)},(e.exports=function(e,t,n,a){var u="function"==typeof n;u&&(s(n,"name")||r(n,"name",t)),e[t]!==n&&(u&&(s(n,i)||r(n,i,e[t]?""+e[t]:c.join(String(t)))),e===o?e[t]=n:a?e[t]?e[t]=n:r(e,t,n):(delete e[t],r(e,t,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[i]||a.call(this)})},function(e,t,n){var o=n(15)("keys"),r=n(17);e.exports=function(e){return o[e]||(o[e]=r(e))}},function(e,t,n){var o=n(16),r=Math.max,s=Math.min;e.exports=function(e,t){return e=o(e),e<0?r(e+t,0):s(e,t)}},function(e,t,n){var o=n(16),r=Math.min;e.exports=function(e){return e>0?r(o(e),9007199254740991):0}},function(e,t,n){var o=n(8);e.exports=function(e){return Object(o(e))}},function(e,t,n){var o=n(6);e.exports=function(e,t){if(!o(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!o(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!o(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var o=n(9);o(o.S+o.F,"Object",{assign:n(37)})},function(e,t,n){var o=n(9),r=n(41)(!1);o(o.S,"Object",{values:function(e){return r(e)}})},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=n(54),s=n(19),i=n(53),a=document.querySelector("script[data-fxo-widget]");if(!a)throw new Error("Script was not added correctly. Ensure the script contains data under the `data-fxo-widget` attribute.");var c=n.i(i.a)(a.getAttribute("data-fxo-widget"));if(!c)throw new Error("Widget data was invalid.");if(c.web&&c.web.data){var u=n.i(i.a)(c.web.data);if(!u)throw new Error("Messenger data was invalid.");c.web=u}var f=a.getAttribute("data-hide-welcome-message-days");f&&(c.hideWelcomeForDays=f);var l=a.getAttribute("data-reveal-welcome-message-seconds");l&&(c.welcomeRevealAfterSecs=l);var d=a.getAttribute("data-hide-welcome-message-seconds");d&&(c.welcomeHideAfterSecs=d);var _=a.getAttribute("data-theme-css-url"),h=a.getAttribute("data-custom-css-url"),m=a.getAttribute("data-theme-name"),g=a.getAttribute("data-theme-css-only");_&&(c.themeCssUrl=_),h&&(c.customCssUrl=h),m&&(c.themeName=m),g&&(c.themeCssOnly=!!g);var p=new r.a(c);if(c.web){var b=window.FxoMessenger=new o.a;b.setConfig({botId:c.web.botId,allowBackgroundScroll:c.allowBackgroundScroll,popupHeight:c.popupHeight,themeCssUrl:c.themeCssUrl,customCssUrl:c.customCssUrl,themeName:c.themeName,themeCssOnly:c.themeCssOnly}),p.on("revealWebMessenger",function(){return b.create()})}c.web&&p.render(),window.FxoWidget=p.getPublicAPI();var v=n.i(s.a)(a.src),y=v.callback||c.callback;y&&window[y]&&window[y]()},function(e,t,n){"use strict";function o(e){try{return JSON.parse(r.Base64.decode(e))}catch(e){console.warn("Data to decode was invalid:",e)}}t.a=o;var r=n(55);n.n(r)},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e){var t=document.createTextNode(e),n=document.createElement("div");return n.appendChild(t),n.innerHTML}var a=n(4),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u={key:"web",label:function(e){return e.label||"Web"},enabled:function(e){return!!e.botId},dispatchToParent:"fxo-widget-reveal-web-messenger"},f=["facebook","slack","telegram","sms"],l=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.processMessageFromWidget=n.processMessageFromWidget.bind(n),n.processDocumentClick=n.processDocumentClick.bind(n),n.config={zIndex:9999};var s=void 0;if(e.hasOwnProperty(u.key)){var a=e[u.key],c="function"==typeof u.label?u.label(a):u.label;u.enabled(a)&&(Object.assign(a,{key:u.key,label:c,labelWidth:u.labelWidth||10*c.length,popoverContent:u.popoverTemplate&&u.popoverTemplate(a),dispatchToParent:u.dispatchToParent}),s=a)}if(s)n.config.channel=s;else{f.some(function(t){return e.hasOwnProperty(t)})&&console.warn("FlowXO - Web widget for displaying the different bot channels has been discontinued.")}return["theme","revealAfterSecs","welcomeRevealAfterSecs","welcomeHideAfterSecs","hideWelcomeForDays","userId","userPaidPlan","zIndex","popupHeight","themeCssUrl","customCssUrl","themeName","themeCssOnly"].forEach(function(t){e.hasOwnProperty(t)&&(n.config[t]=e[t])}),["welcomeText"].forEach(function(t){e.hasOwnProperty(t)&&(n.config[t]=i(e[t]))}),n}return s(t,e),c(t,[{key:"render",value:function(){if(!this.iframe){var e="\n        .fxo-widget-iframe {\n          border: none;\n          display: block;\n          position: fixed;\n          bottom: 15px;\n          right: 0;\n          z-index: "+this.config.zIndex+";\n        }\n        @media (min-width: 769px) {\n          .fxo-widget-iframe {\n            right: 10px;\n          }\n        }\n        @media (min-width: 1025px) {\n          .fxo-widget-iframe {\n            bottom: 25px;\n            right: 20px;\n          }\n        }\n      ";if(this.config.themeCssUrl){var t=document.createElement("link");t.href=this.config.themeCssUrl,t.rel="preload",t.as="style",document.head.appendChild(t)}else{var n=document.createElement("link"),o=this.config.themeBaseUrl||"https://flowxo-messenger-themes.s3-eu-west-1.amazonaws.com",r=this.config.themeName||"classic";n.href=o+"/"+r+".css",n.rel="preload",n.as="style",document.head.appendChild(n)}if(this.config.customCssUrl){var s=document.createElement("link");s.href=this.config.customCssUrl,s.rel="preload",s.as="style",document.head.appendChild(s)}var i=document.createElement("style");i.type="text/css",i.appendChild(document.createTextNode(e)),document.head.appendChild(i),this.iframe=document.createElement("iframe"),this.iframe.id="fxo-widget-iframe",this.iframe.className="fxo-widget-iframe",this.iframe.scrolling="no",this.iframe.width=100,this.iframe.height=100,this.iframe.title="Chatbot",this.iframe.src="https://widget.flowxo.com/widget.html",this.iframe.allowFullscreen=!0,document.body.appendChild(this.iframe),window.addEventListener("message",this.processMessageFromWidget,!1),document.addEventListener("click",this.processDocumentClick,!1)}}},{key:"destroy",value:function(){window.removeEventListener("message",this.processMessageFromWidget,!1),document.removeEventListener("click",this.processDocumentClick,!1),this.sendMessageToWidget("widget:destroy"),document.body.removeChild(this.iframe)}},{key:"processMessageFromWidget",value:function(e){var t=void 0;try{t=JSON.parse(e.data)}catch(e){return}switch(t.action){case"fxo-widget-ready":this.sendMessageToWidget("widget:init",this.config);break;case"fxo-widget-resize":this.iframe&&(this.iframe.width=t.payload.width,this.iframe.height=t.payload.height);break;case"fxo-widget-reveal-web-messenger":this.emit("revealWebMessenger")}}},{key:"sendMessageToWidget",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.iframe&&this.iframe.contentWindow){var n=JSON.stringify({action:e,payload:t});this.iframe.contentWindow.postMessage(n,"*")}}},{key:"processDocumentClick",value:function(e){e.target!==this.iframe&&this.sendMessageToWidget("widget:collapse")}},{key:"getPublicAPI",value:function(){return{destroy:this.destroy.bind(this)}}}]),t}(a.a);t.a=l},function(module,exports){!function(e,t){"object"==typeof exports&&void 0!==module?module.exports=t(e):"function"==typeof define&&define.amd?define(t):t(e)}("undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:this,function(global){"use strict";global=global||{};var _Base64=global.Base64,version="2.5.1",buffer;if(void 0!==module&&module.exports)try{buffer=eval("require('buffer').Buffer")}catch(e){buffer=void 0}var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=function(e){for(var t={},n=0,o=e.length;n<o;n++)t[e.charAt(n)]=n;return t}(b64chars),fromCharCode=String.fromCharCode,cb_utob=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?fromCharCode(192|t>>>6)+fromCharCode(128|63&t):fromCharCode(224|t>>>12&15)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)}var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return fromCharCode(240|t>>>18&7)+fromCharCode(128|t>>>12&63)+fromCharCode(128|t>>>6&63)+fromCharCode(128|63&t)},re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(e){return e.replace(re_utob,cb_utob)},cb_encode=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[b64chars.charAt(n>>>18),b64chars.charAt(n>>>12&63),t>=2?"=":b64chars.charAt(n>>>6&63),t>=1?"=":b64chars.charAt(63&n)].join("")},btoa=global.btoa?function(e){return global.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e)).toString("base64")}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e)).toString("base64")}:function(e){return btoa(utob(e))},encode=function(e,t){return t?_encode(String(e)).replace(/[+\/]/g,function(e){return"+"==e?"-":"_"}).replace(/=/g,""):_encode(String(e))},encodeURI=function(e){return encode(e,!0)},re_btou=new RegExp(["[Ã-Ã][Â-Â¿]","[Ã -Ã¯][Â-Â¿]{2}","[Ã°-Ã·][Â-Â¿]{3}"].join("|"),"g"),cb_btou=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return fromCharCode(55296+(n>>>10))+fromCharCode(56320+(1023&n));case 3:return fromCharCode((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return fromCharCode((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},btou=function(e){return e.replace(re_btou,cb_btou)},cb_decode=function(e){var t=e.length,n=t%4,o=(t>0?b64tab[e.charAt(0)]<<18:0)|(t>1?b64tab[e.charAt(1)]<<12:0)|(t>2?b64tab[e.charAt(2)]<<6:0)|(t>3?b64tab[e.charAt(3)]:0),r=[fromCharCode(o>>>16),fromCharCode(o>>>8&255),fromCharCode(255&o)];return r.length-=[0,0,2,1][n],r.join("")},_atob=global.atob?function(e){return global.atob(e)}:function(e){return e.replace(/\S{1,4}/g,cb_decode)},atob=function(e){return _atob(String(e).replace(/[^A-Za-z0-9\+\/]/g,""))},_decode=buffer?buffer.from&&Uint8Array&&buffer.from!==Uint8Array.from?function(e){return(e.constructor===buffer.constructor?e:buffer.from(e,"base64")).toString()}:function(e){return(e.constructor===buffer.constructor?e:new buffer(e,"base64")).toString()}:function(e){return btou(_atob(e))},decode=function(e){return _decode(String(e).replace(/[-_]/g,function(e){return"-"==e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))},noConflict=function(){var e=global.Base64;return global.Base64=_Base64,e};if(global.Base64={VERSION:version,atob:atob,btoa:btoa,fromBase64:decode,toBase64:encode,utob:utob,encode:encode,encodeURI:encodeURI,btou:btou,decode:decode,noConflict:noConflict,__buffer__:buffer},"function"==typeof Object.defineProperty){var noEnum=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};global.Base64.extendString=function(){Object.defineProperty(String.prototype,"fromBase64",noEnum(function(){return decode(this)})),Object.defineProperty(String.prototype,"toBase64",noEnum(function(e){return encode(this,e)})),Object.defineProperty(String.prototype,"toBase64URI",noEnum(function(){return encode(this,!0)}))}}return global.Meteor&&(Base64=global.Base64),void 0!==module&&module.exports?module.exports.Base64=global.Base64:"function"==typeof define&&define.amd&&define([],function(){return global.Base64}),{Base64:global.Base64}})},,function(e,t,n){n(18),e.exports=n(52)}]);
//# sourceMappingURL=embed.js.map